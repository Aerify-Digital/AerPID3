var websocket,gateway=`ws://${window.location.hostname}/ws`;const emptyColor=[0,0,0],LedMode={AMBIENT:0,BLINK:1,PULSE:2,PRESET:3,RAINBOW:4,RAINBOW_PULSE:5,RAINBOW_WAVE:6,SHIFT:7,PREPULSE:8,STATIC:9,STATUS:10},Led={ENABLE:0,MODE:1,COLOR:2,BRIGHTNESS:3,STAT:4},ParamPid={PID_P:0,PID_I:1,PID_D:2,PARAM_PID:3},ParamAdv={PARAM_ADV_PWM_FACTOR:0,PARAM_ADV_PWM_FREQ:1,PARAM_ADV_PWM_RES:2,PARAM_ADV_PID_BIAS:3,PARAM_ADV_PID_TIME:4,PARAM_ADV_PID_RES:5},SerialCommand={INIT:32,INIT_ADV:42,INIT2:34,STATUS:33,STATUS2:35,AUTO_OFF_LENGTH:53,AUTO_OFF_TOGGLE:50,ADJUST_AMOUNT:36,BLE:80,BUMP_UPDATE:67,BUMP_AMOUNT:68,BUMP_LENGTH:69,BUMP_TOGGLE:66,COIL_TOGGLE:82,COIL_TOGGLE2:83,ESP:0,FAV_1:134,FAV_2:135,FAV_3:136,FAV_4:137,LED:112,PID:144,PID2:145,ADV1_PWM:146,ADV2_PWM:147,ADV1_PID:148,ADV2_PID:149,TEMP:16,TEMP2:19,UNIT:17,WIFI:96,MODE_DEBUG:255},Operation={GET:0,SET:1},WiFi={ENABLE:0,JOIN:1,RESET:2,SCAN:3},Favorite={NAME:0,TEMP:1,BUMP:2},ESP={RESET:0,DEVICE_RESET:1},TemperatureUnit={CELSIUS:0,FAHRENHEIT:1,KELVIN:2};let state={MODEL:0,INITIALIZED:!1,VERSION:"-",NET_VERSION:"-",HOSTNAME:"-",UPTIME:0,UNIT:TemperatureUnit.CELSIUS,TEMP:0,SET_TEMP:0,AVG_TEMP:0,TEMPS:[],TEMPS_AVG:[],TEMP2:0,SET_TEMP2:0,AVG_TEMP2:0,TEMPS2:[],TEMPS_AVG2:[],OUTPUT:[],SIGMA:[],OUTPUT2:[],SIGMA2:[],BUMP:{enabled:!1,length:0,amount:0},COIL1:{enabled:!1,P:0,I:0,D:0,adv:{pwm_factor:0,pwm_freq:0,pwm_res:0,pid_bias:0,pid_time:0,pid_res:0}},COIL2:{enabled:!1,P:0,I:0,D:0,adv:{pwm_factor:0,pwm_freq:0,pwm_res:0,pid_bias:0,pid_time:0,pid_res:0}},LED:{enabled:!0,mode:LedMode.PULSE,color:emptyColor,brightness:0,status:!1},FAV_1:{name:"Fav 1",temp:0},FAV_2:{name:"Fav 2",temp:0},FAV_3:{name:"Fav 3",temp:0},FAV_4:{name:"Fav 4",temp:0},AUTO_OFF:{enabled:!1,length:0},ZOOM_LEVEL:"auto",ZOOM_LEVEL2:"auto",TIME_SPAN1:"two",TIME_SPAN2:"two",DEV_MODE_DEBUG:!1};const Constants={MAX_MESSAGE_SIZE:16384,START_BYTE:2,END_BYTE:3,ESCAPE_BYTE:16},cToC=e=>e/10,cToF=e=>e/10*9/5+32,fToC=e=>5*(e-32)/9,cToK=e=>e/10+273.15,kToC=e=>e/10-273.15;function buf2hex(e){return[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join("")}const getNumber=e=>{const t=new Uint8Array(e);return Number(`0x${Array.from(t).map((e=>e.toString(16).padStart(2,"0"))).join("")}`)},doubleToBytes=e=>{const t=new ArrayBuffer(8);return new DataView(t).setFloat64(0,e,!0),new Uint8Array(t)},bytesToDouble=e=>{if(8!==e.length)throw new Error("Input byte array must be 8 bytes in length to represent a double.");const t=new ArrayBuffer(8),n=new DataView(t);for(let t=0;t<8;t++)n.setUint8(t,e[t]);return parseFloat(n.getFloat64(0,!0).toFixed(3))},numberToBytes=e=>{const t=new ArrayBuffer(4);return new DataView(t).setInt32(0,e,!0),new Uint8Array(t)},encodeBuffer=e=>{let t=[Constants.START_BYTE],n=0,d=new Uint8Array(e);for(let e of d){if(n>Constants.MAX_MESSAGE_SIZE)throw new Error("Message exceeds MAX_MESSAGE_SIZE");switch(e){case Constants.START_BYTE:case Constants.END_BYTE:case Constants.ESCAPE_BYTE:t.push(Constants.ESCAPE_BYTE),t.push(e^Constants.ESCAPE_BYTE),n+=2;break;default:t.push(e),n++}}return t.push(Constants.END_BYTE),new Uint8Array(t)},decodeBuffer=e=>{if(e[0]!==Constants.START_BYTE)throw new Error("Invalid data");if(e[e.length-1]!==Constants.END_BYTE)throw new Error("Invalid data");let t=[],n=!1;for(let d=0;d<e.length&&!n;d++)switch(e[d]){case Constants.START_BYTE:break;case Constants.END_BYTE:n=!0;break;case Constants.ESCAPE_BYTE:++d,t.push(e[d]^Constants.ESCAPE_BYTE);break;default:t.push(e[d])}return new Uint8Array(t)},parseInitMessage=e=>{const t=e.slice(0,3),n=e.slice(3,6),d=e.slice(6,10),a=(new TextDecoder).decode(new Uint8Array(e.slice(10,42))).replace(/\u0000/g,"").trim(),m=(new TextDecoder).decode(new Uint8Array(e.slice(42,295))).replace(/\u0000/g,"").trim(),o=getNumber(e.slice(295,299)),s=getNumber(e.slice(299,301)),i=getNumber(e.slice(301,303)),l=getNumber(e.slice(303,305)),r=e.slice(305,306)[0],c=e.slice(306,307)[0],u=e.slice(307,310),_=e.slice(310,311)[0],E=(new TextDecoder).decode(new Uint8Array(e.slice(311,375))).replace(/\u0000/g,"").trim(),g=getNumber(e.slice(375,377)),I=(new TextDecoder).decode(new Uint8Array(e.slice(377,441))).replace(/\u0000/g,"").trim(),T=getNumber(e.slice(441,443)),y=(new TextDecoder).decode(new Uint8Array(e.slice(443,507))).replace(/\u0000/g,"").trim(),p=getNumber(e.slice(507,509)),B=(new TextDecoder).decode(new Uint8Array(e.slice(509,573))).replace(/\u0000/g,"").trim(),b=getNumber(e.slice(573,575)),v=getNumber(e.slice(575,577)),L=getNumber(e.slice(577,579)),A=getNumber(e.slice(579,581)),f=getNumber(e.slice(581,583)),P=bytesToDouble(Uint8Array.from(e.slice(583,591))),M=bytesToDouble(Uint8Array.from(e.slice(591,599))),N=bytesToDouble(Uint8Array.from(e.slice(599,607))),F=e.slice(607,608)[0],D=[...Array(8)].map(((t,n)=>Boolean(e.slice(608,609)[0]&1<<7-n))),[S,w,C,U,h,O,k,V]=D;return{model:e.slice(609,610),ver:`${t[0]}.${t[1]}.${t[2]}`,verNet:`${n[0]}.${n[1]}.${n[2]}`,ipAddr:`${d[0]}.${d[1]}.${d[2]}.${d[3]}`,ssid:a,hostname:m,uptime:o,unitType:F,bumpTemp:s,bumpTime:i,autoOffTime:l,ledMode:r,ledStatus:c,ledColor:u,ledBrightness:_,fav1Name:E,fav1Temp:g,fav2Name:I,fav2Temp:T,fav3Name:y,fav3Temp:p,fav4Name:B,fav4Temp:b,tempAdjustAmt:v,temp:L,setTemp:A,avgTemp:f,P:P,I:M,D:N,AUTO_OFF_ENABLED:S,COIL_ENABLED:w,BUMP_ENABLED:U,SSID_SET:O,LIGHTS_ENABLED:C,WIFI_ENABLED:h,BT_ENABLED:k}},parseInitMessage2=e=>{if(1==state.MODEL){let t=0;return[{pwmPower:bytesToDouble(Uint8Array.from(e.slice(t,t+=8))),pwmFreq:getNumber(e.slice(t,t+=4)),pwmRes:getNumber(e.slice(t,t+=4)),pidBias:bytesToDouble(Uint8Array.from(e.slice(t,t+=8))),pidTime:getNumber(e.slice(t,t+=4)),pidRes:getNumber(e.slice(t,t+=4))}]}if(2==state.MODEL){let t,n,d=0;t={pwmPower:bytesToDouble(Uint8Array.from(e.slice(d,d+=8))),pwmFreq:getNumber(e.slice(d,d+=4)),pwmRes:getNumber(e.slice(d,d+=4)),pidBias:bytesToDouble(Uint8Array.from(e.slice(d,d+=8))),pidTime:getNumber(e.slice(d,d+=4)),pidRes:getNumber(e.slice(d,d+=4))};n={pwmPower:bytesToDouble(Uint8Array.from(e.slice(d,d+=8))),pwmFreq:getNumber(e.slice(d,d+=4)),pwmRes:getNumber(e.slice(d,d+=4)),pidBias:bytesToDouble(Uint8Array.from(e.slice(d,d+=8))),pidTime:getNumber(e.slice(d,d+=4)),pidRes:getNumber(e.slice(d,d+=4))};return[t,n]}};let connecting=!1,connected=!1;function initWebSocket(){connecting||connected||(connecting=!0,document.getElementById("sockets-modal-connect-btn").disabled=!0,document.getElementById("sockets-modal").style.display="block",document.getElementById("sockets-modal-mobile").style.display="block",document.getElementById("sockets-modal-text").innerHTML="...Connecting...",(websocket=new WebSocket(gateway)).onopen=onOpen,websocket.onclose=onClose,websocket.onmessage=onMessage)}function onOpen(e){connecting=!1,connected=!0,document.getElementById("sockets-modal-text").innerHTML="Connected!",document.getElementById("sockets-modal").style.display="none",document.getElementById("sockets-modal-mobile").style.display="none"}function onClose(e){connecting=!1,connected=!1,document.getElementById("sockets-modal-connect-btn").disabled=!1,document.getElementById("sockets-modal-text").innerHTML="Connection Error!",document.getElementById("sockets-modal").style.display="block",document.getElementById("sockets-modal-mobile").style.display="block"}const initPageData=async e=>{if(state.MODEL=e.model,2==state.MODEL&&(document.getElementById("element1")&&(document.getElementById("element1").style.display="block"),document.getElementById("element2")&&(document.getElementById("element2").style.display="block")),state.UNIT=e.unitType,document.getElementById("wifi_en")&&(document.getElementById("wifi_en").checked=e.WIFI_ENABLED),document.getElementById("SSID")&&(document.getElementById("SSID").value=`${e.ssid}`),document.getElementById("IPADD")&&(document.getElementById("IPADD").value=`${e.ipAddr}`),document.getElementById("NVER")&&(document.getElementById("NVER").value=`${e.verNet}`),state.LED.enabled=e.LIGHTS_ENABLED,document.getElementById("toggle_lights")&&document.getElementById("toggle_lights2")){const e=document.getElementById("toggle_lights"),t=document.getElementById("toggle_lights2");state.LED.enabled?(e.innerHTML='<i class="fas fa-stopwatch" style="color:Tomato;"></i> Disable LEDs',t.innerHTML='<i class="fas fa-stopwatch" style="color:Tomato;"></i> Disable LEDs'):(e.innerHTML='<i class="fas fa-stopwatch" style="color:MediumSeaGreen;"></i> Enable LEDs',t.innerHTML='<i class="fas fa-stopwatch" style="color:MediumSeaGreen;"></i> Enable LEDs')}if(state.LED.mode=e.ledMode,initLED_toggles(state.LED.mode),state.LED.color=e.ledColor,state.LED.status=e.ledStatus,state.LED.status?document.getElementById("statusbut_span").innerText="Disable":document.getElementById("statusbut_span").innerText="Enable",state.LED.brightness=e.ledBrightness,document.getElementById("bright_bar")&&(document.getElementById("bright_bar").value=`${state.LED.brightness}`),document.getElementById("r_set")&&(document.getElementById("r_set").value=`${state.LED.color[0]}`),document.getElementById("r_qset")&&(document.getElementById("r_qset").value=`${state.LED.color[0]}`),document.getElementById("g_set")&&(document.getElementById("g_set").value=`${state.LED.color[1]}`),document.getElementById("g_qset")&&(document.getElementById("g_qset").value=`${state.LED.color[1]}`),document.getElementById("b_set")&&(document.getElementById("b_set").value=`${state.LED.color[2]}`),document.getElementById("b_qset")&&(document.getElementById("b_qset").value=`${state.LED.color[2]}`),document.getElementById("br_set")&&(document.getElementById("br_set").value=`${state.LED.brightness}`),document.getElementById("br_qset")&&(document.getElementById("br_qset").value=`${state.LED.brightness}`),state.COIL1.enabled=e.COIL_ENABLED,state.COIL1.P=e.P,document.getElementById("p_set")&&(document.getElementById("p_set").value=`${state.COIL1.P}`),document.getElementById("p_qset")&&(document.getElementById("p_qset").value=`${state.COIL1.P}`),document.getElementById("p_qset2")&&(document.getElementById("p_qset2").value=`${state.COIL1.P}`),state.COIL1.I=e.I,document.getElementById("i_set")&&(document.getElementById("i_set").value=`${state.COIL1.I}`),document.getElementById("i_qset")&&(document.getElementById("i_qset").value=`${state.COIL1.I}`),document.getElementById("i_qset2")&&(document.getElementById("i_qset2").value=`${state.COIL1.I}`),state.COIL1.D=e.D,document.getElementById("d_set")&&(document.getElementById("d_set").value=`${state.COIL1.D}`),document.getElementById("d_qset")&&(document.getElementById("d_qset").value=`${state.COIL1.D}`),document.getElementById("d_qset2")&&(document.getElementById("d_qset2").value=`${state.COIL1.D}`),document.getElementById("toggle_heat")){const e=document.getElementById("toggle_heat");state.COIL1.enabled?(e.style.setProperty("background-color","#faa843","important"),e.style.setProperty("color","whitesmoke","important")):(e.style.removeProperty("background-color"),e.style.removeProperty("color"))}if(state.FAV_1={name:e.fav1Name,temp:e.fav1Temp},document.getElementById("fav1_n")&&(document.getElementById("fav1_n").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_1.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_1.temp):cToC(state.FAV_1.temp)),document.getElementById("fav1q_n")&&(document.getElementById("fav1q_n").innerHTML=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_1.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_1.temp):cToC(state.FAV_1.temp)+""),document.getElementById("fav1_t")&&(document.getElementById("fav1_t").value=`${state.FAV_1.name}`),document.getElementById("fav1q_t")&&(document.getElementById("fav1q_t").innerHTML=`${state.FAV_1.name}`),state.FAV_2={name:e.fav2Name,temp:e.fav2Temp},document.getElementById("fav2_n")&&(document.getElementById("fav2_n").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_2.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_2.temp):cToC(state.FAV_2.temp)),document.getElementById("fav2q_n")&&(document.getElementById("fav2q_n").innerHTML=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_2.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_2.temp):cToC(state.FAV_2.temp)+""),document.getElementById("fav2_t")&&(document.getElementById("fav2_t").value=`${state.FAV_2.name}`),document.getElementById("fav2q_t")&&(document.getElementById("fav2q_t").innerHTML=`${state.FAV_2.name}`),state.FAV_3={name:e.fav3Name,temp:e.fav3Temp},document.getElementById("fav3_n")&&(document.getElementById("fav3_n").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_3.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_3.temp):cToC(state.FAV_3.temp)),document.getElementById("fav3q_n")&&(document.getElementById("fav3q_n").innerHTML=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_3.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_3.temp):cToC(state.FAV_3.temp)+""),document.getElementById("fav3_t")&&(document.getElementById("fav3_t").value=`${state.FAV_3.name}`),document.getElementById("fav3q_t")&&(document.getElementById("fav3q_t").innerHTML=`${state.FAV_3.name}`),state.FAV_4={name:e.fav4Name,temp:e.fav4Temp},document.getElementById("fav4_n")&&(document.getElementById("fav4_n").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_4.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_4.temp):cToC(state.FAV_4.temp)),document.getElementById("fav4q_n")&&(document.getElementById("fav4q_n").innerHTML=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_4.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_4.temp):cToC(state.FAV_4.temp)+""),document.getElementById("fav4_t")&&(document.getElementById("fav4_t").value=`${state.FAV_4.name}`),document.getElementById("fav4q_t")&&(document.getElementById("fav4q_t").innerHTML=`${state.FAV_4.name}`),state.VERSION=e.ver,document.getElementById("s_version")&&(document.getElementById("s_version").value=state.VERSION),state.NET_VERSION=e.verNet,state.HOSTNAME=e.hostname,document.getElementById("hostname")&&(document.getElementById("hostname").value=state.HOSTNAME),state.UPTIME=e.uptime,document.getElementById("uptime")&&(document.getElementById("uptime").value=`${state.UPTIME}`),state.TEMP=e.temp,document.getElementById("meas_temp")&&(document.getElementById("meas_temp").innerHTML=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.TEMP).toFixed(1):cToC(state.TEMP).toFixed(1)),state.SET_TEMP=e.setTemp,document.getElementById("temp_setting")&&(document.getElementById("temp_setting").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.SET_TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.SET_TEMP).toFixed(1):cToC(state.SET_TEMP).toFixed(1)),updateTempMeter(),updateTempSlider(),state.AVG_TEMP=e.avgTemp,state.AUTO_OFF.enabled=e.AUTO_OFF_ENABLED,document.getElementById("toggle_aoff")&&document.getElementById("aoff_en")){const e=document.getElementById("toggle_aoff"),t=document.getElementById("aoff_en");state.AUTO_OFF.enabled?(e.innerHTML='<i class="fas fa-stopwatch" style="color:Tomato;"></i> Disable Auto-Off',t.checked=!0):(e.innerHTML='<i class="fas fa-stopwatch" style="color:MediumSeaGreen;"></i> Enable Auto-Off',t.checked=!1)}state.AUTO_OFF.length=e.autoOffTime,document.getElementById("aoff_time")&&(document.getElementById("aoff_time").value=`${state.AUTO_OFF.length}`),2==state.MODEL&&emit_websocket([SerialCommand.PID2,Operation.GET,ParamPid.PARAM_PID]),updateTempUnits()},initPageData2=async e=>{state.COIL1.adv.pwm_factor=e[0].pwmPower,document.getElementById("pwm1_set_fact")&&(document.getElementById("pwm1_set_fact").value=""+100*state.COIL1.adv.pwm_factor),state.COIL1.adv.pwm_freq=e[0].pwmFreq,document.getElementById("pwm1_set_freq")&&(document.getElementById("pwm1_set_freq").value=`${state.COIL1.adv.pwm_freq}`),state.COIL1.adv.pwm_res=e[0].pwmRes,document.getElementById("pwm1_set_reso")&&(document.getElementById("pwm1_set_reso").value=`${state.COIL1.adv.pwm_res}`),state.COIL1.adv.pid_bias=e[0].pidBias,document.getElementById("pid1_set_bias")&&(document.getElementById("pid1_set_bias").value=`${state.COIL1.adv.pid_bias}`),state.COIL1.adv.pid_time=e[0].pidTime,document.getElementById("pid1_set_time")&&(document.getElementById("pid1_set_time").value=`${state.COIL1.adv.pid_time}`),state.COIL1.adv.pid_res=e[0].pidRes,document.getElementById("pid1_set_reso")&&(document.getElementById("pid1_set_reso").value=`${state.COIL1.adv.pid_res}`),document.getElementById("pwm_adv1_msg").style.display="none",document.getElementById("pid_adv1_msg").style.display="none",2==state.MODEL&&(state.COIL2.adv.pwm_factor=e[1].pwmPower,document.getElementById("pwm2_set_fact")&&(document.getElementById("pwm2_set_fact").value=""+100*state.COIL2.adv.pwm_factor),state.COIL2.adv.pwm_freq=e[1].pwmFreq,document.getElementById("pwm2_set_freq")&&(document.getElementById("pwm2_set_freq").value=`${state.COIL2.adv.pwm_freq}`),state.COIL2.adv.pwm_res=e[1].pwmRes,document.getElementById("pwm2_set_reso")&&(document.getElementById("pwm2_set_reso").value=`${state.COIL2.adv.pwm_res}`),state.COIL2.adv.pid_bias=e[1].pidBias,document.getElementById("pid2_set_bias")&&(document.getElementById("pid2_set_bias").value=`${state.COIL2.adv.pid_bias}`),state.COIL2.adv.pid_time=e[1].pidTime,document.getElementById("pid2_set_time")&&(document.getElementById("pid2_set_time").value=`${state.COIL2.adv.pid_time}`),state.COIL2.adv.pid_res=e[1].pidRes,document.getElementById("pid2_set_reso")&&(document.getElementById("pid2_set_reso").value=`${state.COIL2.adv.pid_res}`),document.getElementById("pwm_adv2_msg").style.display="none",document.getElementById("pid_adv2_msg").style.display="none")},updateTempUnits=()=>{for(const e of document.getElementsByClassName("temp_unit"))switch(state.UNIT){case TemperatureUnit.FAHRENHEIT:e.innerHTML="&deg;F";break;case TemperatureUnit.KELVIN:e.innerHTML="&deg;K";break;default:e.innerHTML="&deg;C"}},updateTempMeter=()=>{const e=document.getElementById("bar"),t=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.TEMP).toFixed(1):cToC(state.TEMP).toFixed(1),n=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.SET_TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.SET_TEMP).toFixed(1):cToC(state.SET_TEMP).toFixed(1);e.style.transform="rotate("+(45+.15*t)+"deg)";var d="black";d=t>=n-7&&t<=n+7?"green":t>n+7&&t<=n+15?"rgba(255, 165, 0, 1)":t>n+15?"red":"rgba("+.12*t+", "+.17*t+", "+.12*t+", 1)",e.style.borderBottomColor=d,e.style.borderRightColor=t>600?d:"#eee"},updateTempMeter_1=()=>{const e=document.getElementById("bar1"),t=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.TEMP).toFixed(1):cToC(state.TEMP).toFixed(1),n=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.SET_TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.SET_TEMP).toFixed(1):cToC(state.SET_TEMP).toFixed(1);e.style.transform="rotate("+(45+.15*t)+"deg)";var d="black";d=t>=n-7&&t<=n+7?"green":t>n+7&&t<=n+15?"rgba(255, 165, 0, 1)":t>n+15?"red":"rgba("+.12*t+", "+.17*t+", "+.12*t+", 1)",e.style.borderBottomColor=d,e.style.borderRightColor=t>600?d:"#eee"},updateTempMeter_2=()=>{const e=document.getElementById("bar2"),t=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.TEMP2).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.TEMP2).toFixed(1):cToC(state.TEMP2).toFixed(1),n=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.SET_TEMP2).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.SET_TEMP2).toFixed(1):cToC(state.SET_TEMP2).toFixed(1);e.style.transform="rotate("+(45+.15*t)+"deg)";var d="black";d=t>=n-7&&t<=n+7?"green":t>n+7&&t<=n+15?"rgba(255, 165, 0, 1)":t>n+15?"red":"rgba("+.12*t+", "+.17*t+", "+.12*t+", 1)",e.style.borderBottomColor=d,e.style.borderRightColor=t>600?d:"#eee"};function updateTempSlider(){var e=document.getElementById("temp_slider");document.activeElement===e||(document.getElementById("temp_slider").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.SET_TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.SET_TEMP).toFixed(1):cToC(state.SET_TEMP).toFixed(1))}function updateTempSlider_1(){var e=document.getElementById("temp_slider_1");document.activeElement===e||(document.getElementById("temp_slider_1").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.SET_TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.SET_TEMP).toFixed(1):cToC(state.SET_TEMP).toFixed(1))}function updateTempSlider_2(){var e=document.getElementById("temp_slider_2");document.activeElement===e||(document.getElementById("temp_slider_2").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.SET_TEMP2).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.SET_TEMP2).toFixed(1):cToC(state.SET_TEMP2).toFixed(1))}const initPageMessage=async e=>{e.SSID_SET?document.getElementById("wifi_setup_alert")&&(document.getElementById("wifi_setup_alert").style.display="none"):openWifiWarningModal()},handleMessage=e=>{let t,n;switch(e[0]){case SerialCommand.INIT:const _=parseInitMessage(e.slice(1));initPageData(_),initPageMessage(_);break;case SerialCommand.INIT_ADV:const E=parseInitMessage2(e.slice(2));initPageData2(E);break;case SerialCommand.STATUS:t=e[2]>0;var d=getNumber(e.slice(3,5)),a=getNumber(e.slice(5,7)),m=getNumber(e.slice(7,9)),o=getNumber(e.slice(9,11)),s=getNumber(e.slice(11,13));if(updateChart(state,state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(d).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(d).toFixed(1):cToC(d).toFixed(1),state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(a).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(a).toFixed(1):cToC(a).toFixed(1),state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(m).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(m).toFixed(1):cToC(m).toFixed(1),o/10,s/10),state.COIL1.enabled=t,state.TEMP=d,state.SET_TEMP=m,document.getElementById("toggle_heat")){const e=document.getElementById("toggle_heat");state.COIL1.enabled?(e.style.setProperty("background-color","#faa843","important"),e.style.setProperty("color","whitesmoke","important")):(e.style.removeProperty("background-color"),e.style.removeProperty("color"))}if(document.getElementById("toggle_heat_1")){const e=document.getElementById("toggle_heat_1");state.COIL1.enabled?(e.style.setProperty("background-color","#faa843","important"),e.style.setProperty("color","whitesmoke","important")):(e.style.removeProperty("background-color"),e.style.removeProperty("color"))}document.getElementById("meas_temp")&&(document.getElementById("meas_temp").innerHTML=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.TEMP).toFixed(1):cToC(state.TEMP).toFixed(1)),document.getElementById("meas_temp_1")&&(document.getElementById("meas_temp_1").innerHTML=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.TEMP).toFixed(1):cToC(state.TEMP).toFixed(1));var i=document.getElementById("temp_setting");!(document.activeElement===i)&&document.getElementById("temp_setting")&&(document.getElementById("temp_setting").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.SET_TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.SET_TEMP).toFixed(1):cToC(state.SET_TEMP).toFixed(1));var l=document.getElementById("temp_setting_1");!(document.activeElement===l)&&document.getElementById("temp_setting_1")&&(document.getElementById("temp_setting_1").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.SET_TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.SET_TEMP).toFixed(1):cToC(state.SET_TEMP).toFixed(1)),updateTempMeter(),updateTempMeter_1(),updateTempSlider(),updateTempSlider_1();break;case SerialCommand.STATUS2:t=e[2]>0;d=getNumber(e.slice(3,5)),a=getNumber(e.slice(5,7)),m=getNumber(e.slice(7,9)),o=getNumber(e.slice(9,11)),s=getNumber(e.slice(11,13));if(updateChart2(state,state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(d).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(d).toFixed(1):cToC(d).toFixed(1),state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(a).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(a).toFixed(1):cToC(a).toFixed(1),state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(m).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(m).toFixed(1):cToC(m).toFixed(1),o/10,s/10),state.COIL2.enabled=t,state.TEMP2=d,state.SET_TEMP2=m,document.getElementById("toggle_heat_2")){const e=document.getElementById("toggle_heat_2");state.COIL2.enabled?(e.style.setProperty("background-color","#faa843","important"),e.style.setProperty("color","whitesmoke","important")):(e.style.removeProperty("background-color"),e.style.removeProperty("color"))}document.getElementById("meas_temp_2")&&(document.getElementById("meas_temp_2").innerHTML=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.TEMP2).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.TEMP2).toFixed(1):cToC(state.TEMP2).toFixed(1));i=document.getElementById("temp_setting_2");!(document.activeElement===i)&&document.getElementById("temp_setting_2")&&(document.getElementById("temp_setting_2").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.SET_TEMP2).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.SET_TEMP2).toFixed(1):cToC(state.SET_TEMP2).toFixed(1)),updateTempMeter_2(),updateTempSlider_2();break;case SerialCommand.TEMP:m=getNumber(e.slice(2));state.SET_TEMP=m;i=document.getElementById("temp_setting");!(document.activeElement===i)&&document.getElementById("temp_setting")&&(document.getElementById("temp_setting").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.SET_TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.SET_TEMP).toFixed(1):cToC(state.SET_TEMP).toFixed(1));l=document.getElementById("temp_setting_1");!(document.activeElement===l)&&document.getElementById("temp_setting_1")&&(document.getElementById("temp_setting_1").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.SET_TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.SET_TEMP).toFixed(1):cToC(state.SET_TEMP).toFixed(1)),updateTempMeter(),updateTempMeter_1(),updateTempSlider(),updateTempSlider_1();break;case SerialCommand.TEMP2:m=getNumber(e.slice(2));state.SET_TEMP=m;i=document.getElementById("temp_setting_2");!(document.activeElement===i)&&document.getElementById("temp_setting_2")&&(document.getElementById("temp_setting_2").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.SET_TEMP).toFixed(1):state.UNIT==TemperatureUnit.KELVIN?cToK(state.SET_TEMP).toFixed(1):cToC(state.SET_TEMP).toFixed(1)),updateTempMeter_2(),updateTempSlider_2();break;case SerialCommand.UNIT:const g=e[1];state.UNIT=g,document.getElementsByClassName("temp_unit").innerHTML=g;break;case SerialCommand.COIL_TOGGLE:if(t=e[1]>0,state.COIL1.enabled=t,document.getElementById("toggle_heat")){const e=document.getElementById("toggle_heat");state.COIL1.enabled?(e.style.setProperty("background-color","#faa843","important"),e.style.setProperty("color","whitesmoke","important")):(e.style.removeProperty("background-color"),e.style.removeProperty("color"))}if(document.getElementById("toggle_heat_1")){const e=document.getElementById("toggle_heat_1");state.COIL1.enabled?(e.style.setProperty("background-color","#faa843","important"),e.style.setProperty("color","whitesmoke","important")):(e.style.removeProperty("background-color"),e.style.removeProperty("color"))}break;case SerialCommand.COIL_TOGGLE2:if(t=e[1]>0,state.COIL2.enabled=t,document.getElementById("toggle_heat_2")){const e=document.getElementById("toggle_heat_2");state.COIL2.enabled?(e.style.setProperty("background-color","#faa843","important"),e.style.setProperty("color","whitesmoke","important")):(e.style.removeProperty("background-color"),e.style.removeProperty("color"))}break;case SerialCommand.PID:if(n=e[1],n===ParamPid.PARAM_PID){const t=bytesToDouble(Uint8Array.from(e.slice(2,10))),n=bytesToDouble(Uint8Array.from(e.slice(10,18))),d=bytesToDouble(Uint8Array.from(e.slice(18,26)));state.COIL1.P=t,document.getElementById("p_set")&&(document.getElementById("p_set").value=`${state.COIL1.P}`),document.getElementById("p_qset")&&(document.getElementById("p_qset").value=`${state.COIL1.P}`),document.getElementById("p_qset2")&&(document.getElementById("p_qset2").value=`${state.COIL1.P}`),state.COIL1.I=n,document.getElementById("i_set")&&(document.getElementById("i_set").value=`${state.COIL1.I}`),document.getElementById("i_qset")&&(document.getElementById("i_qset").value=`${state.COIL1.I}`),document.getElementById("i_qset2")&&(document.getElementById("i_qset2").value=`${state.COIL1.I}`),state.COIL1.D=d,document.getElementById("d_set")&&(document.getElementById("d_set").value=`${state.COIL1.D}`),document.getElementById("d_qset")&&(document.getElementById("d_qset").value=`${state.COIL1.D}`),document.getElementById("d_qset2")&&(document.getElementById("d_qset2").value=`${state.COIL1.D}`)}break;case SerialCommand.PID2:if(n=e[1],n===ParamPid.PARAM_PID){const t=bytesToDouble(Uint8Array.from(e.slice(2,10))),n=bytesToDouble(Uint8Array.from(e.slice(10,18))),d=bytesToDouble(Uint8Array.from(e.slice(18,26)));state.COIL2.P=t,document.getElementById("p_qset2b")&&(document.getElementById("p_qset2b").value=`${state.COIL2.P}`),state.COIL2.I=n,document.getElementById("i_qset2b")&&(document.getElementById("i_qset2b").value=`${state.COIL2.I}`),state.COIL2.D=d,document.getElementById("d_qset2b")&&(document.getElementById("d_qset2b").value=`${state.COIL2.D}`)}break;case SerialCommand.ADV1_PWM:switch(n=e[1],n){case ParamAdv.PARAM_ADV_PWM_FACTOR:{const t=bytesToDouble(Uint8Array.from(e.slice(2,10)));state.COIL1.adv.pwm_factor=t,document.getElementById("pwm1_set_fact")&&(document.getElementById("pwm1_set_fact").value=""+100*t)}case ParamAdv.PARAM_ADV_PWM_FREQ:{const t=bytesToDouble(Uint8Array.from(e.slice(2,10)));state.COIL1.adv.pwm_freq=t,document.getElementById("pwm1_set_freq")&&(document.getElementById("pwm1_set_freq").value=`${t}`)}case ParamAdv.PARAM_ADV_PWM_RES:{const t=bytesToDouble(Uint8Array.from(e.slice(2,10)));state.COIL1.adv.pwm_res=t,document.getElementById("pwm1_set_reso")&&(document.getElementById("pwm1_set_reso").value=`${t}`);break}}break;case SerialCommand.ADV1_PID:switch(n=e[1],n){case ParamAdv.PARAM_ADV_PID_BIAS:{const t=bytesToDouble(Uint8Array.from(e.slice(2,10)));state.COIL1.adv.pid_bias=t,document.getElementById("pid1_set_bias")&&(document.getElementById("pid1_set_bias").value=`${t}`)}case ParamAdv.PARAM_ADV_PID_TIME:{const t=bytesToDouble(Uint8Array.from(e.slice(2,10)));state.COIL1.adv.pid_time=t,document.getElementById("pid1_set_time")&&(document.getElementById("pid1_set_time").value=`${t}`)}case ParamAdv.PARAM_ADV_PID_TIME:{const t=bytesToDouble(Uint8Array.from(e.slice(2,10)));state.COIL1.adv.pid_res=t,document.getElementById("pid1_set_reso")&&(document.getElementById("pid1_set_reso").value=`${t}`);break}}break;case SerialCommand.ADV2_PWM:switch(n=e[1],n){case ParamAdv.PARAM_ADV_PWM_FACTOR:{const t=bytesToDouble(Uint8Array.from(e.slice(2,10)));state.COIL2.adv.pwm_factor=t,document.getElementById("pwm2_set_fact")&&(document.getElementById("pwm2_set_fact").value=""+100*t)}case ParamAdv.PARAM_ADV_PWM_FREQ:{const t=bytesToDouble(Uint8Array.from(e.slice(2,10)));state.COIL2.adv.pwm_freq=t,document.getElementById("pwm2_set_freq")&&(document.getElementById("pwm2_set_freq").value=`${t}`)}case ParamAdv.PARAM_ADV_PWM_RES:{const t=bytesToDouble(Uint8Array.from(e.slice(2,10)));state.COIL2.adv.pwm_res=t,document.getElementById("pwm2_set_reso")&&(document.getElementById("pwm2_set_reso").value=`${t}`);break}}break;case SerialCommand.ADV2_PID:switch(n=e[1],n){case ParamAdv.PARAM_ADV_PID_BIAS:{const t=bytesToDouble(Uint8Array.from(e.slice(2,10)));state.COIL2.adv.pid_bias=t,document.getElementById("pid2_set_bias")&&(document.getElementById("pid2_set_bias").value=`${t}`)}case ParamAdv.PARAM_ADV_PID_TIME:{const t=bytesToDouble(Uint8Array.from(e.slice(2,10)));state.COIL2.adv.pid_time=t,document.getElementById("pid2_set_time")&&(document.getElementById("pid2_set_time").value=`${t}`)}case ParamAdv.PARAM_ADV_PID_TIME:{const t=bytesToDouble(Uint8Array.from(e.slice(2,10)));state.COIL2.adv.pid_res=t,document.getElementById("pid2_set_reso")&&(document.getElementById("pid2_set_reso").value=`${t}`);break}}break;case SerialCommand.WIFI:switch(n=e[1],n){case WiFi.ENABLE:break;case WiFi.JOIN:document.getElementById("join_wifi")&&(document.getElementById("join_wifi").classList.remove("w3-pale-green"),document.getElementById("join_wifi").innerHTML='<div><i class="fas fa-check"></i> Joining Network</div>'),document.getElementById("save_wifi_alert")&&(document.getElementById("save_wifi_alert").style.display="block"),document.getElementById("rst_wifi")&&document.getElementById("rst_wifi").classList.add("w3-pale-red");break;case WiFi.RESET:document.getElementById("rst_wifi")&&document.getElementById("rst_wifi").classList.remove("w3-pale-red"),document.getElementById("save_wifi_alert")&&(document.getElementById("save_wifi_alert").style.display="block"),document.getElementById("join_wifi")&&(document.getElementById("join_wifi").innerHTML='<div><i class="fas fa-link"></i> Join Network</div>',document.getElementById("join_wifi").classList.add("w3-pale-green"))}break;case SerialCommand.LED:switch(n=e[1],n){case Led.ENABLE:var r=e[3]>0;if(state.LED.enabled=r,document.getElementById("toggle_lights")&&document.getElementById("toggle_lights2")){const e=document.getElementById("toggle_lights"),t=document.getElementById("toggle_lights2");state.LED.enabled?(e.innerHTML='<i class="fas fa-stopwatch" style="color:Tomato;"></i> Disable LEDs',t.innerHTML='<i class="fas fa-stopwatch" style="color:Tomato;"></i> Disable LEDs'):(e.innerHTML='<i class="fas fa-stopwatch" style="color:MediumSeaGreen;"></i> Enable LEDs',t.innerHTML='<i class="fas fa-stopwatch" style="color:MediumSeaGreen;"></i> Enable LEDs')}break;case Led.MODE:switch(e[3]){case LedMode.AMBIENT:break;case LedMode.BLINK:setLED_Toggles(LedMode.BLINK)&&(document.getElementById("leden_blink").disabled=!0);break;case LedMode.PULSE:setLED_Toggles(LedMode.PULSE)&&(document.getElementById("leden_pulse").disabled=!0);break;case LedMode.PRESET:break;case LedMode.RAINBOW:setLED_Toggles(LedMode.RAINBOW)&&(document.getElementById("led_rainbow2").disabled=!0);break;case LedMode.RAINBOW_PULSE:setLED_Toggles(LedMode.RAINBOW_PULSE)&&(document.getElementById("led_rainbow3").disabled=!0);break;case LedMode.RAINBOW_WAVE:setLED_Toggles(LedMode.RAINBOW_WAVE)&&(document.getElementById("led_rainbow").disabled=!0);break;case LedMode.SHIFT:setLED_Toggles(LedMode.SHIFT)&&(document.getElementById("led_shift").disabled=!0);break;case LedMode.PREPULSE:setLED_Toggles(LedMode.PREPULSE)&&(document.getElementById("led_pulse").disabled=!0);break;case LedMode.STATIC:setLED_Toggles(LedMode.STATIC)&&(document.getElementById("leden_static").disabled=!0)}break;case Led.COLOR:(new TextDecoder).decode(new Uint8Array(e.slice(3))).replace(/\u0000/g,"").trim();break;case Led.BRIGHTNESS:document.getElementById("bright_bar").value=e[3],document.getElementById("br_qset").value=e[3],state.LED.brightness=this.value;break;case Led.STAT:e[3]>0?(state.LED.status=!0,document.getElementById("statusbut_span").innerText="Disable"):(state.LED.status=!1,document.getElementById("statusbut_span").innerText="Enable")}break;case SerialCommand.AUTO_OFF_TOGGLE:var c=e[1]>0;if(document.getElementById("toggle_aoff")&&document.getElementById("aoff_en")){const e=document.getElementById("toggle_aoff"),t=document.getElementById("aoff_en");c?(e.innerHTML='<i class="fas fa-stopwatch" style="color:Tomato;"></i> Disable Auto-Off',t.checked=!0):(e.innerHTML='<i class="fas fa-stopwatch" style="color:MediumSeaGreen;"></i> Enable Auto-Off',t.checked=!1)}break;case SerialCommand.AUTO_OFF_LENGTH:var u=e[1];document.getElementById("aoff_time")&&(document.getElementById("aoff_time").value=`${u}`);break;case SerialCommand.FAV_1:switch(n=e[1],n){case Favorite.BUMP:break;case Favorite.NAME:state.FAV_1.name=(new TextDecoder).decode(new Uint8Array(e.slice(3))).replace(/\u0000/g,"").trim(),document.getElementById("fav1_t")&&(document.getElementById("fav1_t").value=`${state.FAV_1.name}`),document.getElementById("fav1q_t")&&(document.getElementById("fav1q_t").innerHTML=`${state.FAV_1.name}`);break;case Favorite.TEMP:state.FAV_1.temp=getNumber(e.slice(3)),document.getElementById("fav1_n")&&(document.getElementById("fav1_n").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_1.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_1.temp):cToC(state.FAV_1.temp)),document.getElementById("fav1q_n")&&(document.getElementById("fav1q_n").innerHTML=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_1.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_1.temp):cToC(state.FAV_1.temp)+"&deg;")}break;case SerialCommand.FAV_2:switch(n=e[1],n){case Favorite.BUMP:break;case Favorite.NAME:state.FAV_2.name=(new TextDecoder).decode(new Uint8Array(e.slice(3))).replace(/\u0000/g,"").trim(),document.getElementById("fav2_t")&&(document.getElementById("fav2_t").value=`${state.FAV_2.name}`),document.getElementById("fav2q_t")&&(document.getElementById("fav2q_t").innerHTML=`${state.FAV_2.name}`);break;case Favorite.TEMP:state.FAV_2.temp=getNumber(e.slice(3)),document.getElementById("fav2_n")&&(document.getElementById("fav2_n").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_2.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_2.temp):cToC(state.FAV_2.temp)),document.getElementById("fav2q_n")&&(document.getElementById("fav2q_n").innerHTML=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_2.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_2.temp):cToC(state.FAV_2.temp)+"&deg;")}break;case SerialCommand.FAV_3:switch(n=e[1],n){case Favorite.BUMP:break;case Favorite.NAME:state.FAV_3.name=(new TextDecoder).decode(new Uint8Array(e.slice(3))).replace(/\u0000/g,"").trim(),document.getElementById("fav3_t")&&(document.getElementById("fav3_t").value=`${state.FAV_3.name}`),document.getElementById("fav3q_t")&&(document.getElementById("fav3q_t").innerHTML=`${state.FAV_3.name}`);break;case Favorite.TEMP:state.FAV_3.temp=getNumber(e.slice(3)),document.getElementById("fav3_n")&&(document.getElementById("fav3_n").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_3.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_3.temp):cToC(state.FAV_3.temp)),document.getElementById("fav3q_n")&&(document.getElementById("fav3q_n").innerHTML=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_3.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_3.temp):cToC(state.FAV_3.temp)+"&deg;")}break;case SerialCommand.FAV_4:switch(n=e[1],n){case Favorite.BUMP:break;case Favorite.NAME:state.FAV_4.name=(new TextDecoder).decode(new Uint8Array(e.slice(3))).replace(/\u0000/g,"").trim(),document.getElementById("fav4_t")&&(document.getElementById("fav4_t").value=`${state.FAV_4.name}`),document.getElementById("fav4q_t")&&(document.getElementById("fav4q_t").innerHTML=`${state.FAV_4.name}`);break;case Favorite.TEMP:state.FAV_4.temp=getNumber(e.slice(3)),document.getElementById("fav4_n")&&(document.getElementById("fav4_n").value=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_4.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_4.temp):cToC(state.FAV_4.temp)),document.getElementById("fav4q_n")&&(document.getElementById("fav4q_n").innerHTML=state.UNIT==TemperatureUnit.FAHRENHEIT?cToF(state.FAV_4.temp):state.UNIT==TemperatureUnit.KELVIN?cToK(state.FAV_4.temp):cToC(state.FAV_4.temp)+"&deg;")}break;case SerialCommand.MODE_DEBUG:{const t=e[2];state.DEV_MODE_DEBUG=0!=t,document.getElementById("esp_device_debug_checkbox")&&(document.getElementById("esp_device_debug_checkbox").checked=state.DEV_MODE_DEBUG)}}};function onMessage(e){if(e.data instanceof Blob){const t=new FileReader;t.onload=()=>{handleMessage(decodeBuffer(new Uint8Array(t.result)))},t.readAsArrayBuffer(e.data)}}const emit_websocket=e=>{const t=new ArrayBuffer(e.length),n=new DataView(t);for(var d=0;d<e.length;d++)n.setUint8(d,e[d]);websocket.send(encodeBuffer(n.buffer))};var brightslide=document.getElementById("bright_bar");function hexTorgb(e){return["0x"+e[1]+e[2]|0,"0x"+e[3]+e[4]|0,"0x"+e[5]+e[6]|0]}brightslide.onchange=function(){emit_websocket([SerialCommand.LED,Operation.SET,Led.BRIGHTNESS,this.value]),state.LED.brightness=this.value};var colorInp=document.getElementById("cp_input");colorInp.onchange=function(){let e=this.value;e=`${e}\0`;hexTorgb(e);emit_websocket([SerialCommand.LED,Operation.SET,Led.COLOR,...(new TextEncoder).encode(e)])};var pChanged=!1,iChanged=!1,dChanged=!1,qpChanged=!1,qiChanged=!1,qdChanged=!1,qp2Changed=!1,qi2Changed=!1,qd2Changed=!1,qp2bChanged=!1,qi2bChanged=!1,qd2bChanged=!1;function pidButtonInit(){var e=document.getElementById("pid_qset2"),t=document.getElementById("pid_qset2b"),n=document.getElementById("pid_qset"),d=document.getElementById("pid_set");n.addEventListener("click",sendPidSettings),e.addEventListener("click",sendPidSettings),t.addEventListener("click",sendPid2Settings),d.addEventListener("click",sendPidSettings),document.getElementById("p_set").addEventListener("change",(function(){pChanged=!0})),document.getElementById("p_qset").addEventListener("change",(function(){qpChanged=!0})),document.getElementById("p_qset2").addEventListener("change",(function(){qp2Changed=!0})),document.getElementById("i_set").addEventListener("change",(function(){iChanged=!0})),document.getElementById("i_qset").addEventListener("change",(function(){qiChanged=!0})),document.getElementById("i_qset2").addEventListener("change",(function(){qi2Changed=!0})),document.getElementById("d_set").addEventListener("change",(function(){dChanged=!0})),document.getElementById("d_qset").addEventListener("change",(function(){qdChanged=!0})),document.getElementById("d_qset2").addEventListener("change",(function(){qd2Changed=!0})),document.getElementById("p_qset2b").addEventListener("change",(function(){qp2bChanged=!0})),document.getElementById("i_qset2b").addEventListener("change",(function(){qi2bChanged=!0})),document.getElementById("d_qset2b").addEventListener("change",(function(){qd2bChanged=!0}))}function sendPidSettings(){if(pChanged){let e=document.getElementById("p_set").value;document.getElementById("p_qset").value=e,document.getElementById("p_qset2").value=e,emit_websocket([SerialCommand.PID,Operation.SET,ParamPid.PID_P,...doubleToBytes(Number(e))]),pChanged=!1}if(iChanged){let e=document.getElementById("i_set").value;document.getElementById("i_qset").value=e,document.getElementById("i_qset2").value=e,emit_websocket([SerialCommand.PID,Operation.SET,ParamPid.PID_I,...doubleToBytes(Number(e))]),iChanged=!1}if(dChanged){let e=document.getElementById("d_set").value;document.getElementById("d_qset").value=e,document.getElementById("d_qset2").value=e,emit_websocket([SerialCommand.PID,Operation.SET,ParamPid.PID_D,...doubleToBytes(Number(e))]),dChanged=!1}if(qpChanged){let e=document.getElementById("p_qset").value;document.getElementById("p_set").value=e,document.getElementById("p_qset2").value=e,emit_websocket([SerialCommand.PID,Operation.SET,ParamPid.PID_P,...doubleToBytes(Number(e))]),qpChanged=!1}if(qiChanged){let e=document.getElementById("i_qset").value;document.getElementById("i_set").value=e,document.getElementById("i_qset2").value=e,emit_websocket([SerialCommand.PID,Operation.SET,ParamPid.PID_I,...doubleToBytes(Number(e))]),qiChanged=!1}if(qdChanged){let e=document.getElementById("d_qset").value;document.getElementById("d_set").value=e,document.getElementById("s_qset2").value=e,emit_websocket([SerialCommand.PID,Operation.SET,ParamPid.PID_D,...doubleToBytes(Number(e))]),qdChanged=!1}if(qp2Changed){let e=document.getElementById("p_qset2").value;document.getElementById("p_set").value=e,document.getElementById("d_qset").value=e,emit_websocket([SerialCommand.PID,Operation.SET,ParamPid.PID_P,...doubleToBytes(Number(e))]),qp2Changed=!1}if(qi2Changed){let e=document.getElementById("i_qset2").value;document.getElementById("i_set").value=e,document.getElementById("i_qset").value=e,emit_websocket([SerialCommand.PID,Operation.SET,ParamPid.PID_I,...doubleToBytes(Number(e))]),qi2Changed=!1}if(qd2Changed){let e=document.getElementById("d_qset2").value;document.getElementById("d_set").value=e,document.getElementById("d_qset").value=e,emit_websocket([SerialCommand.PID,Operation.SET,ParamPid.PID_D,...doubleToBytes(Number(e))]),qd2Changed=!1}}function sendPid2Settings(){if(qp2bChanged){let e=document.getElementById("p_qset2b").value;emit_websocket([SerialCommand.PID2,Operation.SET,ParamPid.PID_P,...doubleToBytes(Number(e))]),qp2bChanged=!1}if(qi2bChanged){let e=document.getElementById("i_qset2b").value;emit_websocket([SerialCommand.PID2,Operation.SET,ParamPid.PID_I,...doubleToBytes(Number(e))]),qi2bChanged=!1}if(qd2bChanged){let e=document.getElementById("d_qset2b").value;emit_websocket([SerialCommand.PID2,Operation.SET,ParamPid.PID_D,...doubleToBytes(Number(e))]),qd2bChanged=!1}}function advButtonInit(){var e=document.getElementById("pwm_adv1_submit"),t=document.getElementById("pwm_adv2_submit"),n=document.getElementById("pid_adv1_submit"),d=document.getElementById("pid_adv2_submit"),a=document.getElementById("pid_adv1_auto"),m=document.getElementById("pid_adv2_auto");e.addEventListener("click",sendPwm1AdvSettings),n.addEventListener("click",sendPid1AdvSettings),t.addEventListener("click",sendPwm2AdvSettings),d.addEventListener("click",sendPid2AdvSettings),a.addEventListener("click",autoScaleResolution1),m.addEventListener("click",autoScaleResolution2)}function autoScaleResolution1(){const e=state.COIL1.adv.pwm_res;if(void 0===e||e<8||e>14)return;const t=Math.pow(2,e)-1;state.COIL1.adv.pid_res=t,document.getElementById("pid1_set_reso")&&(document.getElementById("pid1_set_reso").value=`${t}`)}function autoScaleResolution2(){const e=state.COIL2.adv.pwm_res;if(void 0===e||e<8||e>14)return;const t=Math.pow(2,e)-1;state.COIL2.adv.pid_res=t,document.getElementById("pid2_set_reso")&&(document.getElementById("pid2_set_reso").value=`${t}`)}function sendPwm1AdvSettings(){document.getElementById("pwm_adv1_msg").style.display="none";{let e=.01*document.getElementById("pwm1_set_fact").value;if(e>2.5)return document.getElementById("pwm_adv1_txt").innerHTML="Power Factor must be less than or equal to 250%!",void(document.getElementById("pwm_adv1_msg").style.display="block");if(e<=0)return document.getElementById("pwm_adv1_txt").innerHTML="Power Factor must be greater than 0%!",void(document.getElementById("pwm_adv1_msg").style.display="block");state.COIL1.adv.pwm_factor=Number(e),emit_websocket([SerialCommand.ADV1_PWM,Operation.SET,ParamAdv.PARAM_ADV_PWM_FACTOR,...doubleToBytes(Number(e))])}{let e=document.getElementById("pwm1_set_freq").value;if(e.includes("-"))return document.getElementById("pwm_adv1_txt").innerHTML="Frequency must be a non negative whole number!",void(document.getElementById("pwm_adv1_msg").style.display="block");if(e<1)return document.getElementById("pwm_adv1_txt").innerHTML="Frequency must be 1 hertz or greater!",void(document.getElementById("pwm_adv1_msg").style.display="block");if(e>1e6)return document.getElementById("pwm_adv1_txt").innerHTML="Frequency must be less than 1 megahertz!",void(document.getElementById("pwm_adv1_msg").style.display="block");if(e.includes("."))return document.getElementById("pwm_adv1_txt").innerHTML="Frequency must be a whole number!",void(document.getElementById("pwm_adv1_msg").style.display="block");state.COIL1.adv.pwm_freq=Number(e),emit_websocket([SerialCommand.ADV1_PWM,Operation.SET,ParamAdv.PARAM_ADV_PWM_FREQ,...numberToBytes(Number(e))])}{let e=document.getElementById("pwm1_set_reso").value;if(e.includes("-"))return document.getElementById("pwm_adv1_txt").innerHTML="Bit Resolution must be a non negative whole number!",void(document.getElementById("pwm_adv1_msg").style.display="block");if(e<8)return document.getElementById("pwm_adv1_txt").innerHTML="Bit Resolution must be 8 or greater!",void(document.getElementById("pwm_adv1_msg").style.display="block");if(e>16)return document.getElementById("pwm_adv1_txt").innerHTML="Bit Resolution must be 16 or less!",void(document.getElementById("pwm_adv1_msg").style.display="block");if(e.includes("."))return document.getElementById("pwm_adv1_txt").innerHTML="Bit Resolution must be a whole number!",void(document.getElementById("pwm_adv1_msg").style.display="block");state.COIL1.adv.pwm_res=Number(e),emit_websocket([SerialCommand.ADV1_PWM,Operation.SET,ParamAdv.PARAM_ADV_PWM_RES,...numberToBytes(Number(e))])}}function sendPid1AdvSettings(){document.getElementById("pid_adv1_msg").style.display="none";{let e=document.getElementById("pid1_set_bias").value;if(e>1e3)return document.getElementById("pid_adv1_txt").innerHTML="PID Bias must be less than or equal to 1000!",void(document.getElementById("pid_adv1_msg").style.display="block");if(e<0)return document.getElementById("pid_adv1_txt").innerHTML="PID Bias must be greater than or equal to 0!",void(document.getElementById("pid_adv1_msg").style.display="block");state.COIL1.adv.pid_bias=Number(e),emit_websocket([SerialCommand.ADV1_PID,Operation.SET,ParamAdv.PARAM_ADV_PID_BIAS,...doubleToBytes(Number(e))])}{let e=document.getElementById("pid1_set_time").value;if(e<100)return document.getElementById("pid_adv1_txt").innerHTML="Time must be 100 milliseconds or greater!",void(document.getElementById("pid_adv1_msg").style.display="block");if(e>1e4)return document.getElementById("pid_adv1_txt").innerHTML="Time must be less than 10000 milliseconds!",void(document.getElementById("pid_adv1_msg").style.display="block");if(e.includes("."))return document.getElementById("pid_adv1_txt").innerHTML="Time must be a whole number!",void(document.getElementById("pid_adv1_msg").style.display="block");state.COIL1.adv.pid_time=Number(e),emit_websocket([SerialCommand.ADV1_PID,Operation.SET,ParamAdv.PARAM_ADV_PID_TIME,...numberToBytes(Number(e))])}{let e=document.getElementById("pid1_set_reso").value;if(e.includes("-"))return document.getElementById("pid_adv1_txt").innerHTML="PID Resolution must be a non negative whole number!",void(document.getElementById("pid_adv1_msg").style.display="block");if(e<8)return document.getElementById("pid_adv1_txt").innerHTML="PID Resolution must be 8 or greater!",void(document.getElementById("pid_adv1_msg").style.display="block");if(e>32768)return document.getElementById("pid_adv1_txt").innerHTML="PID Resolution must be 32768 or less!",void(document.getElementById("pid_adv1_msg").style.display="block");if(e.includes("."))return document.getElementById("pid_adv1_txt").innerHTML="PID Resolution must be a whole number!",void(document.getElementById("pid_adv1_msg").style.display="block");state.COIL1.adv.pid_res=Number(e),emit_websocket([SerialCommand.ADV1_PID,Operation.SET,ParamAdv.PARAM_ADV_PID_RES,...numberToBytes(Number(e))])}}function sendPwm2AdvSettings(){document.getElementById("pwm_adv2_msg").style.display="none";{let e=.01*document.getElementById("pwm2_set_fact").value;if(e>2)return document.getElementById("pwm_adv2_txt").innerHTML="Power Factor must be less than or equal to 200%!",void(document.getElementById("pwm_adv2_msg").style.display="block");if(e<=0)return document.getElementById("pwm_adv2_txt").innerHTML="Power Factor must be greater than 0%!",void(document.getElementById("pwm_adv2_msg").style.display="block");state.COIL2.adv.pwm_factor=Number(e),emit_websocket([SerialCommand.ADV2_PWM,Operation.SET,ParamAdv.PARAM_ADV_PWM_FACTOR,...doubleToBytes(Number(e))])}{let e=document.getElementById("pwm2_set_freq").value;if(e.includes("-"))return document.getElementById("pwm_adv2_txt").innerHTML="Frequency must be a non negative whole number!",void(document.getElementById("pwm_adv2_msg").style.display="block");if(e<1)return document.getElementById("pwm_adv2_txt").innerHTML="Frequency must be 1 hertz or greater!",void(document.getElementById("pwm_adv2_msg").style.display="block");if(e>1e6)return document.getElementById("pwm_adv2_txt").innerHTML="Frequency must be less than 1 megahertz!",void(document.getElementById("pwm_adv2_msg").style.display="block");if(e.includes("."))return document.getElementById("pwm_adv2_txt").innerHTML="Frequency must be a whole number!",void(document.getElementById("pwm_adv2_msg").style.display="block");state.COIL2.adv.pwm_freq=Number(e),emit_websocket([SerialCommand.ADV2_PWM,Operation.SET,ParamAdv.PARAM_ADV_PWM_FREQ,...numberToBytes(Number(e))])}{let e=document.getElementById("pwm2_set_reso").value;if(e.includes("-"))return document.getElementById("pwm_adv2_txt").innerHTML="Bit Resolution must be a non negative whole number!",void(document.getElementById("pwm_adv2_msg").style.display="block");if(e<8)return document.getElementById("pwm_adv2_txt").innerHTML="Bit Resolution must be 8 or greater!",void(document.getElementById("pwm_adv2_msg").style.display="block");if(e>16)return document.getElementById("pwm_adv2_txt").innerHTML="Bit Resolution must be 16 or less!",void(document.getElementById("pwm_adv2_msg").style.display="block");if(e.includes("."))return document.getElementById("pwm_adv2_txt").innerHTML="Bit Resolution must be a whole number!",void(document.getElementById("pwm_adv2_msg").style.display="block");state.COIL2.adv.pwm_res=Number(e),emit_websocket([SerialCommand.ADV2_PWM,Operation.SET,ParamAdv.PARAM_ADV_PWM_RES,...numberToBytes(Number(e))])}}function sendPid2AdvSettings(){document.getElementById("pid_adv2_msg").style.display="none";{let e=document.getElementById("pid2_set_bias").value;if(e.includes("."))return document.getElementById("pid_adv2_txt").innerHTML="PID Bias must be a whole number!",void(document.getElementById("pid_adv2_msg").style.display="block");if(e>1e3)return document.getElementById("pid_adv2_txt").innerHTML="PID Bias must be less than or equal to 1000!",void(document.getElementById("pid_adv2_msg").style.display="block");if(e<0)return document.getElementById("pid_adv2_txt").innerHTML="PID Bias must be greater than or equal to 0!",void(document.getElementById("pid_adv2_msg").style.display="block");state.COIL2.adv.pid_bias=Number(e),emit_websocket([SerialCommand.ADV2_PID,Operation.SET,ParamAdv.PARAM_ADV_PID_BIAS,...doubleToBytes(Number(e))])}{let e=document.getElementById("pid2_set_time").value;if(e.includes("-"))return document.getElementById("pid_adv2_txt").innerHTML="Time must be a non negative whole number!",void(document.getElementById("pid_adv2_msg").style.display="block");if(e<100)return document.getElementById("pid_adv2_txt").innerHTML="Time must be 100 milliseconds or greater!",void(document.getElementById("pid_adv2_msg").style.display="block");if(e>1e4)return document.getElementById("pid_adv2_txt").innerHTML="Time must be less than 10000 milliseconds!",void(document.getElementById("pid_adv2_msg").style.display="block");if(e.includes("."))return document.getElementById("pid_adv2_txt").innerHTML="Time must be a whole number!",void(document.getElementById("pid_adv2_msg").style.display="block");state.COIL2.adv.pid_time=Number(e),emit_websocket([SerialCommand.ADV2_PID,Operation.SET,ParamAdv.PARAM_ADV_PID_TIME,...numberToBytes(Number(e))])}{let e=document.getElementById("pid2_set_reso").value;if(e.includes("-"))return document.getElementById("pid_adv2_txt").innerHTML="PID Resolution must be a non negative whole number!",void(document.getElementById("pid_adv2_msg").style.display="block");if(e<8)return document.getElementById("pid_adv2_txt").innerHTML="PID Resolution must be 8 or greater!",void(document.getElementById("pid_adv2_msg").style.display="block");if(e>32768)return document.getElementById("pid_adv2_txt").innerHTML="PID Resolution must be 32768 or less!",void(document.getElementById("pid_adv2_msg").style.display="block");if(e.includes("."))return document.getElementById("pid_adv2_txt").innerHTML="PID Resolution must be a whole number!",void(document.getElementById("pid_adv2_msg").style.display="block");state.COIL2.adv.pid_res=Number(e),emit_websocket([SerialCommand.ADV2_PID,Operation.SET,ParamAdv.PARAM_ADV_PID_RES,...numberToBytes(Number(e))])}}function favListenersInit(){document.getElementById("fav1_t").addEventListener("change",(function(){changeFavName(1)})),document.getElementById("fav1_n").addEventListener("change",(function(){changeFavTemp(1)})),document.getElementById("fav2_t").addEventListener("change",(function(){changeFavName(2)})),document.getElementById("fav2_n").addEventListener("change",(function(){changeFavTemp(2)})),document.getElementById("fav3_t").addEventListener("change",(function(){changeFavName(3)})),document.getElementById("fav3_n").addEventListener("change",(function(){changeFavTemp(3)})),document.getElementById("fav4_t").addEventListener("change",(function(){changeFavName(4)})),document.getElementById("fav4_n").addEventListener("change",(function(){changeFavTemp(4)}))}const changeFavTemp=e=>{var t=document.getElementById("fav1_t"),n=SerialCommand.FAV_1;switch(e){case 1:default:t=document.getElementById("fav1_n"),n=SerialCommand.FAV_1;break;case 2:t=document.getElementById("fav2_n"),n=SerialCommand.FAV_2;break;case 3:t=document.getElementById("fav3_n"),n=SerialCommand.FAV_3;break;case 4:t=document.getElementById("fav4_n"),n=SerialCommand.FAV_4}var d=t.value;emit_websocket([n,Operation.SET,Favorite.TEMP,...doubleToBytes(Number(d))])},changeFavName=e=>{var t=document.getElementById("fav1_t"),n=SerialCommand.FAV_1;switch(e){case 1:default:t=document.getElementById("fav1_t"),n=SerialCommand.FAV_1;break;case 2:t=document.getElementById("fav2_t"),n=SerialCommand.FAV_2;break;case 3:t=document.getElementById("fav3_t"),n=SerialCommand.FAV_3;break;case 4:t=document.getElementById("fav4_t"),n=SerialCommand.FAV_4}var d=t.value;d=`${d}\0`,emit_websocket([n,Operation.SET,Favorite.NAME,...(new TextEncoder).encode(d)])};let timer_temp_setting,timer_temp_slider;document.getElementById("temp_setting").addEventListener("change",(function(){timer_temp_setting&&clearTimeout(timer_temp_setting),timer_temp_setting=setTimeout((()=>{updateTemp(0),timer_temp_setting=void 0}),700)})),document.getElementById("temp_slider").addEventListener("change",(function(){timer_temp_slider&&clearTimeout(timer_temp_slider),timer_temp_slider=setTimeout((()=>{updateTemp(1),timer_temp_slider=void 0}),300)}));const updateTemp=e=>{let t;if(1==e)t=document.getElementById("temp_slider");else{if(0!=e)return;t=document.getElementById("temp_setting")}emit_websocket([SerialCommand.TEMP,Operation.SET,...doubleToBytes(Number(t.value))])};let timer_temp_setting_1,timer_temp_slider_1,timer_temp_setting_2,timer_temp_slider_2;document.getElementById("temp_setting_1").addEventListener("change",(function(){timer_temp_setting_1&&clearTimeout(timer_temp_setting_1),timer_temp_setting_1=setTimeout((()=>{updateTemp_1(0),timer_temp_setting_1=void 0}),700)})),document.getElementById("temp_slider_1").addEventListener("change",(function(){timer_temp_slider_1&&clearTimeout(timer_temp_slider_1),timer_temp_slider_1=setTimeout((()=>{updateTemp_1(1),timer_temp_slider_1=void 0}),300)}));const updateTemp_1=e=>{let t;if(1==e)t=document.getElementById("temp_slider_1");else{if(0!=e)return;t=document.getElementById("temp_setting_1")}emit_websocket([SerialCommand.TEMP,Operation.SET,...doubleToBytes(Number(t.value))])};document.getElementById("temp_setting_2").addEventListener("change",(function(){timer_temp_setting_2&&clearTimeout(timer_temp_setting_2),timer_temp_setting_2=setTimeout((()=>{updateTemp_2(0),timer_temp_setting_2=void 0}),700)})),document.getElementById("temp_slider_2").addEventListener("change",(function(){timer_temp_slider_2&&clearTimeout(timer_temp_slider_2),timer_temp_slider_2=setTimeout((()=>{updateTemp_2(1),timer_temp_slider_2=void 0}),300)}));const updateTemp_2=e=>{let t;if(1==e)t=document.getElementById("temp_slider_2");else{if(0!=e)return;t=document.getElementById("temp_setting_2")}emit_websocket([SerialCommand.TEMP2,Operation.SET,...doubleToBytes(Number(t.value))])};document.getElementById("bump_amt").addEventListener("change",(function(){emit_websocket([SerialCommand.BUMP_AMOUNT,Operation.SET,...doubleToBytes(Number(this.value))])})),document.getElementById("bump_l").addEventListener("change",(function(){emit_websocket([SerialCommand.BUMP_LENGTH,Operation.SET,...doubleToBytes(Number(this.value))])})),document.getElementById("toggle_bump").addEventListener("click",(function(){toggleBump()}));const toggleBump=()=>{emit_websocket([SerialCommand.BUMP_TOGGLE,Operation.SET,state.BUMP.enabled?0:1]),state.BUMP.enabled=!state.BUMP.enabled};document.getElementById("led_rainbow").addEventListener("click",(function(){toggleLED_rainbowWave()})),document.getElementById("led_rainbow2").addEventListener("click",(function(){toggleLED_rainbow()})),document.getElementById("led_rainbow3").addEventListener("click",(function(){toggleLED_rainbowPulse()})),document.getElementById("led_shift").addEventListener("click",(function(){toggleLED_preShift()})),document.getElementById("led_pulse").addEventListener("click",(function(){toggleLED_prePulse()})),document.getElementById("leden_blink").addEventListener("click",(function(){toggleLED_amBlink()})),document.getElementById("leden_pulse").addEventListener("click",(function(){toggleLED_amPulse()})),document.getElementById("leden_static").addEventListener("click",(function(){toggleLED_static()})),document.getElementById("led_status").addEventListener("click",(function(){toggleLED_status()})),document.getElementById("toggle_lights").addEventListener("click",(function(){toggleLights()})),document.getElementById("toggle_lights2").addEventListener("click",(function(){toggleLights()}));const toggleLights=()=>{emit_websocket([SerialCommand.LED,Operation.SET,Led.ENABLE,state.LED.enabled?0:1]),state.LED.enabled=!state.LED.enabled},setLED_Toggles=e=>{buttons=document.getElementsByClassName("ledbtn");for(var t=0;t<buttons.length;t++)buttons[t].disabled=!1;return state.LED.mode!=e&&(state.LED.mode=e,!0)},initLED_toggles=e=>{buttons=document.getElementsByClassName("ledbtn");for(var t=0;t<buttons.length;t++)buttons[t].disabled=!1;switch(e){case LedMode.AMBIENT:break;case LedMode.BLINK:document.getElementById("leden_blink").disabled=!0;break;case LedMode.PULSE:document.getElementById("leden_pulse").disabled=!0;break;case LedMode.PRESET:break;case LedMode.RAINBOW:document.getElementById("led_rainbow2").disabled=!0;break;case LedMode.RAINBOW_PULSE:document.getElementById("led_rainbow3").disabled=!0;break;case LedMode.RAINBOW_WAVE:document.getElementById("led_rainbow").disabled=!0;break;case LedMode.SHIFT:document.getElementById("led_shift").disabled=!0;break;case LedMode.PREPULSE:document.getElementById("led_pulse").disabled=!0;break;case LedMode.STATIC:document.getElementById("leden_static").disabled=!0}},toggleLED_status=()=>{emit_websocket([SerialCommand.LED,Operation.SET,Led.STAT,state.LED.status?0:1]),state.LED.status?(state.LED.status=!1,document.getElementById("statusbut_span").innerText="Enable"):(state.LED.status=!0,document.getElementById("statusbut_span").innerText="Disable")},toggleLED_static=()=>{emit_websocket([SerialCommand.LED,Operation.SET,Led.MODE,LedMode.STATIC,state.LED.mode==LedMode.STATIC?0:1]),setLED_Toggles(LedMode.STATIC)&&(document.getElementById("leden_static").disabled=!0)},toggleLED_amPulse=()=>{emit_websocket([SerialCommand.LED,Operation.SET,Led.MODE,LedMode.PULSE,state.LED.mode==LedMode.PULSE?0:1]),setLED_Toggles(LedMode.PULSE)&&(document.getElementById("leden_pulse").disabled=!0)},toggleLED_amBlink=()=>{emit_websocket([SerialCommand.LED,Operation.SET,Led.MODE,LedMode.BLINK,state.LED.mode==LedMode.BLINK?0:1]),setLED_Toggles(LedMode.BLINK)&&(document.getElementById("leden_blink").disabled=!0)},toggleLED_rainbowWave=()=>{emit_websocket([SerialCommand.LED,Operation.SET,Led.MODE,LedMode.RAINBOW_WAVE,state.LED.mode==LedMode.RAINBOW_WAVE?0:1]),setLED_Toggles(LedMode.RAINBOW_WAVE)&&(document.getElementById("led_rainbow").disabled=!0)},toggleLED_rainbow=()=>{emit_websocket([SerialCommand.LED,Operation.SET,Led.MODE,LedMode.RAINBOW,state.LED.mode==LedMode.RAINBOW?0:1]),setLED_Toggles(LedMode.RAINBOW)&&(document.getElementById("led_rainbow2").disabled=!0)},toggleLED_rainbowPulse=()=>{emit_websocket([SerialCommand.LED,Operation.SET,Led.MODE,LedMode.RAINBOW_PULSE,state.LED.mode==LedMode.RAINBOW_PULSE?0:1]),setLED_Toggles(LedMode.RAINBOW_PULSE)&&(document.getElementById("led_rainbow3").disabled=!0)},toggleLED_preShift=()=>{emit_websocket([SerialCommand.LED,Operation.SET,Led.MODE,LedMode.SHIFT,state.LED.mode==LedMode.SHIFT?0:1]),setLED_Toggles(LedMode.SHIFT)&&(document.getElementById("led_shift").disabled=!0)},toggleLED_prePulse=()=>{emit_websocket([SerialCommand.LED,Operation.SET,Led.MODE,LedMode.PREPULSE,state.LED.mode==LedMode.PREPULSE?0:1]),setLED_Toggles(LedMode.PREPULSE)&&(document.getElementById("led_pulse").disabled=!0)},updateBrightness=()=>{emit_websocket([SerialCommand.LED,Operation.SET,Led.BRIGHTNESS,0])},closeAdvMsg=(e,t)=>{const n=document.getElementById(t);n&&(n.style.display="none")};document.getElementById("toggle_heat").addEventListener("click",(function(){toggleHeat()})),document.getElementById("toggle_heat_1").addEventListener("click",(function(){toggleHeat()}));const toggleHeat=()=>{emit_websocket([SerialCommand.COIL_TOGGLE,Operation.SET,state.COIL1.enabled?0:1])};document.getElementById("toggle_heat_2").addEventListener("click",(function(){toggleHeat2()}));const toggleHeat2=()=>{emit_websocket([SerialCommand.COIL_TOGGLE2,Operation.SET,state.COIL2.enabled?0:1])},zoomChange=e=>{const t=e.value;updateZoom(t),state.ZOOM_LEVEL=t,chart.update()},zoomChange2=e=>{const t=e.value;updateZoom2(t),state.ZOOM_LEVEL2=t,chart2.update()},timeChange_1=e=>{const t=e.value;state.TIME_SPAN1=t,chart.update()},timeChange_2=e=>{const t=e.value;state.TIME_SPAN2=t,chart2.update()};function openChartTab(e,t){var n,d,a;for(d=document.getElementsByClassName("tabcontent"),n=0;n<d.length;n++)d[n].style.display="none";for(a=document.getElementsByClassName("tablinks"),n=0;n<a.length;n++)a[n].className=a[n].className.replace(" active","");document.getElementById(t).style.display="block",e.currentTarget.className+=" active"}const init=()=>{pidButtonInit(),favListenersInit(),advButtonInit(),window.addEventListener("load",(function(e){initWebSocket()})),document.getElementById("element1").click()};init();